<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, viewport-fit=cover">
  <meta name="theme-color" content="#121212">
  <title>EchoSage Microdose Tracker</title>
  <link rel="manifest" href="manifest.webmanifest">
  <link rel="stylesheet" href="styles.css">
  <script defer src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <script defer src="app.js"></script>
</head>
<body class="dark">
  <header class="app-header">
    <h1>EchoSage Microdose Tracker</h1>
  </header>

  <main id="app">
    <section id="home" class="active">
      <h2>Home & Summary</h2>
      <p class="intro">This screen shows an overview of your tracking data.</p>
      <div class="stats" id="statsSummary"></div>
      <div class="charts">
        <canvas id="chartMood"></canvas>
        <canvas id="chartAnxiety"></canvas>
        <canvas id="chartStress"></canvas>
        <canvas id="chartSleep"></canvas>
        <canvas id="chartFtt"></canvas>
      </div>
    </section>

    <section id="baseline">
      <h2>Baseline Intake</h2>
      <p class="intro">Fill this before dosing so we have a starting point.</p>
      <form id="baselineForm">
        <label>Initials <input type="text" id="blInitials" maxlength="3"></label>
        <label>Age <input type="number" id="blAge" min="12" max="120"></label>
        <button type="button" id="saveBaseline">Save Baseline</button>
      </form>
      <div id="baselineSummary" class="hidden"></div>
    </section>

    <section id="dosing">
      <h2>Dosing Log</h2>
      <form id="doseForm">
        <label>Date & time <input type="datetime-local" id="doseDate"></label>
        <label>Dose amount <input type="number" id="doseAmount" step="0.01"></label>
        <button type="button" id="saveDose">Save Dose</button>
      </form>
      <div id="doseList"></div>
    </section>

    <section id="daily">
      <h2>Daily Log</h2>
      <form id="dailyForm">
        <label>Date <input type="date" id="dailyDate"></label>
        <label>Mood (1â€“10) <input type="number" id="dailyMood" min="1" max="10"></label>
        <button type="button" id="saveDaily">Save Daily Log</button>
      </form>
      <div id="dailyList"></div>
    </section>

    <section id="weekly">
      <h2>Weekly Check-in</h2>
      <form id="weeklyForm">
        <label>Week start date <input type="date" id="weeklyDate"></label>
        <button type="button" id="saveWeekly">Save Weekly</button>
      </form>
      <div id="weeklyList"></div>
    </section>

    <section id="cognition">
      <h2>Cognition</h2>
      <p><strong>Finger Tapping Test (FTT):</strong> Tap as fast as possible for 10 seconds. Screen will lock during test.</p>
      <label for="fttHand">Hand</label>
      <select id="fttHand"><option value="dominant">Dominant</option><option value="nondominant">Non-dominant</option></select>
      <button type="button" id="fttStart">Start Trial</button>
      <div id="fttTimer">Ready</div>
      <div id="fttTapArea" class="tap-area">Tap here</div>
      <div id="fttResults"></div>
    </section>

    <section id="export">
      <h2>Export & Import</h2>
      <button type="button" id="exportJson">Export JSON</button>
      <button type="button" id="showData">Show Data</button>
      <div id="exportOutput"></div>
      <textarea id="importData"></textarea>
      <button type="button" id="importJson">Import</button>
    </section>

    <section id="settings">
      <h2>Settings</h2>
      <button type="button" id="settingsClear">Clear all data</button>
    </section>
  </main>

  <nav id="bottomNav">
    <button data-target="home">Home</button>
    <button data-target="baseline">Base</button>
    <button data-target="dosing">Dose</button>
    <button data-target="daily">Daily</button>
    <button data-target="weekly">Weekly</button>
    <button data-target="cognition">FTT</button>
    <button data-target="export">Export</button>
    <button data-target="settings">Settings</button>
  </nav>
</body>
</html>
