/* Mystical UI: dark nebula, glass cards, accessible high contrast */
:root{
  --bg:#0b0f18;
  --fg:#e7f0ff;
  --muted:#9cb3d3;
  --glass:rgba(20,24,38,0.6);
  --glass-b:#31415f80;
  --accent:#7ee787; /* green glow */
  --accent2:#a78bfa; /* purple */
  --danger:#ef5350;
  --nav-h:68px;
}

*{box-sizing:border-box}
html,body{height:100%}
body{margin:0;background:var(--bg);color:var(--fg);font-family:ui-sans-serif,system-ui,Segoe UI,Roboto,Inter,Helvetica,Arial}
body.light{--bg:#f5f7fb;--fg:#1a2433;--muted:#4f5b72;--glass:#ffffffbb;--glass-b:#e0e6f7;}

.app-header{position:sticky;top:0;z-index:5;padding:12px 14px}
.brand{display:flex;align-items:center;gap:8px}
.brand h1{font-size:1.25rem;margin:0}
.tag{margin:.15rem 0 0;color:var(--muted);font-size:.9rem}

.bg{position:fixed;inset:0;z-index:-2;overflow:hidden}
.nebula{position:absolute;inset:-20%;background:radial-gradient(1000px 600px at 20% 10%, #1f2240cc, transparent 60%), radial-gradient(900px 500px at 80% 30%, #243b55aa, transparent 60%), radial-gradient(1000px 700px at 60% 80%, #281b3dcc, transparent 60%);filter:blur(8px);animation:float 22s ease-in-out infinite alternate}
.stars{position:absolute;inset:0;background-image:radial-gradient(#ffffff66 1px, transparent 1px), radial-gradient(#ffffff33 1px, transparent 1px);background-size:3px 3px, 4px 4px;background-position:0 0, 10px 10px;opacity:.3;animation:twinkle 8s linear infinite}
@keyframes float{to{transform:translateY(-20px) translateX(20px)}}
@keyframes twinkle{50%{opacity:.4}}

.glass{background:var(--glass);backdrop-filter:blur(10px);border:1px solid var(--glass-b);border-radius:16px;box-shadow:0 10px 30px #0006}
.helper,.insight,.charts,.form,.list{padding:12px;margin:12px 0}
.form label{display:flex;flex-direction:column;gap:.3rem;margin:.4rem 0}
input,select,textarea{background:#0f1423;border:1px solid #34405a;color:var(--fg);border-radius:10px;padding:.7rem;font-size:1rem}
input::placeholder{color:#6c7ba1}
textarea{resize:vertical}
legend{padding:0 6px}

.intro{color:var(--muted)}
.muted{color:var(--muted)}
.small{font-size:.9rem}

.kpi-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:10px}
.kpi{padding:10px;border-radius:14px;background:linear-gradient(145deg,#121b2b,#0d1220);border:1px solid #2a3858}
.kpi .label{color:#9cb3d3;font-size:.85rem}
.kpi .value{font-size:1.3rem;font-weight:700}

.charts h3{margin:.3rem 0 8px}

.timer{font-size:1.3rem;margin:6px 0;text-align:center;min-height:1.6em}
.tap-area{height:180px;border:2px dashed var(--accent);border-radius:18px;display:flex;align-items:center;justify-content:center;font-weight:700;user-select:none;-webkit-user-select:none;-webkit-touch-callout:none;touch-action:none}

.btn-row{display:flex;flex-wrap:wrap;gap:8px}

.primary{background:linear-gradient(135deg,#5ad37a,#7ee787);color:#13201b;border:none}
.secondary{background:#25324a;color:#d9e6ff;border:1px solid #31415f}
.danger{background:#8b2a2a;border:1px solid #b33;font-weight:600}

nav#bottomNav{
  position:fixed;bottom:0;left:0;width:100%;height:var(--nav-h);
  display:flex;align-items:center;gap:6px;overflow-x:auto;padding:6px 8px;z-index:6
}
nav#bottomNav button{flex:0 0 auto;min-width:100px;height:48px;border:none;border-radius:12px;background:#202941;color:#dbe7ff;font-weight:600}
nav#bottomNav button:focus,nav#bottomNav button:hover{outline:2px solid #7ee78733}

main{padding:12px;padding-bottom:calc(var(--nav-h) + 20px)}

/* two-row fallback */
@media (max-width:420px){
  nav#bottomNav{display:grid;grid-template-columns:repeat(4,1fr);height:auto;row-gap:6px}
  main{padding-bottom:130px}
}

/* accessibility */
body.large-text{font-size:1.1rem}
.hidden{display:none}
